import React, { useState, useRef, useCallback } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Sparkles, RotateCcw, Trophy, Utensils } from 'lucide-react';

const LunchRoulette = () => {
  const [isSpinning, setIsSpinning] = useState(false);
  const [result, setResult] = useState(null);
  const [showResult, setShowResult] = useState(false);
  const [rotation, setRotation] = useState(0);
  const wheelRef = useRef(null);
  const animationRef = useRef(null);

  const healthTips = [
    {
      icon: "ğŸ¥—",
      category: "ê· í˜• ì‹ì‚¬",
      tip: "íƒ„ìˆ˜í™”ë¬¼, ë‹¨ë°±ì§ˆ, ì±„ì†Œë¥¼ ê³¨ê³ ë£¨ ì„­ì·¨í•˜ë©´ í•˜ë£¨ ì¢…ì¼ ì—ë„ˆì§€ê°€ ë„˜ì³ìš”!"
    },
    {
      icon: "ğŸ’§",
      category: "ìˆ˜ë¶„ ì„­ì·¨", 
      tip: "í•˜ë£¨ 8ì”ì˜ ë¬¼ë¡œ ëª¸ì† ë…ì†Œë¥¼ ê¹”ë”í•˜ê²Œ ë°°ì¶œí•˜ì„¸ìš”!"
    },
    {
      icon: "ğŸš¶â€â™‚ï¸",
      category: "ê¾¸ì¤€í•œ ìš´ë™",
      tip: "í•˜ë£¨ 30ë¶„ ê±·ê¸°ë§Œ í•´ë„ ì‹¬ì¥ë³‘, ë‹¹ë‡¨ ì˜ˆë°©ì— í° ë„ì›€ì´ ë©ë‹ˆë‹¤!"
    },
    {
      icon: "ğŸ˜´", 
      category: "ì¶©ë¶„í•œ ìˆ˜ë©´",
      tip: "í•˜ë£¨ 7~8ì‹œê°„ ìˆ™ë©´ìœ¼ë¡œ ë©´ì—­ë ¥ì„ ë†’ì´ê³  ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í•´ì†Œí•˜ì„¸ìš”!"
    }
  ];

  const menus = [
    { 
      name: 'ê¹€ì¹˜ì°Œê°œ', 
      emoji: 'ğŸŒ¶ï¸', 
      color: 'bg-red-500',
      messages: [
        "ëœ¨ëˆí•œ êµ­ë¬¼ì´ ëª¸ê³¼ ë§ˆìŒì„ ë”°ëœ»í•˜ê²Œ í•´ì¤„ ê±°ì˜ˆìš” ğŸ’•",
        "ì˜¤ëŠ˜ ê°™ì€ ë‚ ì—” ë§¤ì½¤í•œ ê¹€ì¹˜ì°Œê°œê°€ ë”±ì´ì£ ! ğŸ”¥",
        "í• ë¨¸ë‹ˆê°€ ë“ì—¬ì£¼ë˜ ê·¸ ë§›ì´ ê·¸ë¦¬ì›Œì§€ëŠ” ë‚ ì´ë„¤ìš” ğŸ‘µğŸ’",
        "ê¹€ì¹˜ì˜ ê¹Šì€ ë§›ì´ ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ì™„ì„±ì‹œì¼œì¤„ ê±°ì˜ˆìš” âœ¨"
      ]
    },
    { 
      name: 'ìˆœëŒ€êµ­', 
      emoji: 'ğŸ²', 
      color: 'bg-cyan-500',
      messages: [
        "ì§„í•œ êµ­ë¬¼ì´ ì§€ì¹œ ë‹¹ì‹ ì„ ìœ„ë¡œí•´ì¤„ ê±°ì˜ˆìš” ğŸ¤—",
        "ë”°ëœ»í•œ ìˆœëŒ€êµ­ í•œ ê·¸ë¦‡ì´ë©´ ëª¨ë“  í”¼ë¡œê°€ ì‚¬ë¼ì ¸ìš” ğŸ˜Œ",
        "ì˜¤ëŠ˜ì€ ë“ ë“ í•œ í•œ ë¼ê°€ í•„ìš”í•œ ë‚ ì´ì—ìš”! ğŸ’ª",
        "ê¹Šê³  ì§„í•œ ë§›ì´ ë‹¹ì‹ ì˜ ë§ˆìŒê¹Œì§€ ì±„ì›Œì¤„ ê±°ì˜ˆìš” â¤ï¸"
      ]
    },
    { 
      name: 'ë¶€ëŒ€ì°Œê°œ', 
      emoji: 'ğŸœ', 
      color: 'bg-blue-500',
      messages: [
        "ì•Œë¡ë‹¬ë¡í•œ ì¬ë£Œë“¤ì´ ë‹¹ì‹ ì˜ ê¸°ë¶„ì„ ë°ê²Œ ë§Œë“¤ì–´ì¤„ ê±°ì˜ˆìš” ğŸŒˆ",
        "ì¹œêµ¬ë“¤ê³¼ ë‚˜ëˆ ë¨¹ê³  ì‹¶ì€ ê·¸ëŸ° ë§›ì´ì£ ! ğŸ‘«",
        "í•œ ìˆŸê°€ë½ì— ë‹´ê¸´ ì¶”ì–µì˜ ë§›ì„ ëŠê»´ë³´ì„¸ìš” ğŸ¥„ğŸ’­",
        "í‘¸ì§í•œ ë¶€ëŒ€ì°Œê°œë¡œ ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ë“ ë“ í•˜ê²Œ! ğŸ‰"
      ]
    },
    { 
      name: 'ë–¡ë³¶ì´', 
      emoji: 'ğŸ˜', 
      color: 'bg-orange-500',
      messages: [
        "ì«„ê¹ƒí•œ ë–¡ì´ ë‹¹ì‹ ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ëª¨ë‘ ë‚ ë ¤ë²„ë¦´ ê±°ì˜ˆìš” ğŸ’¨",
        "ë‹¬ì½¤ë§¤ì½¤í•œ ë§›ì´ ì–´ë¦° ì‹œì ˆë¡œ ë°ë ¤ê°€ì¤„ ê±°ì˜ˆìš” ğŸˆ",
        "ì˜¤ëŠ˜ì€ ê°„ì‹ì´ ì•„ë‹Œ ë‹¹ë‹¹í•œ í•œ ë¼! ğŸ˜‹",
        "ë¹¨ê°„ ì†ŒìŠ¤ê°€ ë‹¹ì‹ ì˜ í•˜ë£¨ì— í™œë ¥ì„ ë¶ˆì–´ë„£ì–´ì¤„ ê±°ì˜ˆìš” ğŸ”´âœ¨"
      ]
    },
    { 
      name: 'ìƒ¤ë¸Œìƒ¤ë¸Œ', 
      emoji: 'ğŸ¥©', 
      color: 'bg-purple-500',
      messages: [
        "ì‹ ì„ í•œ ì±„ì†Œì™€ ê³ ê¸°ê°€ ë‹¹ì‹ ì„ ê±´ê°•í•˜ê²Œ ë§Œë“¤ì–´ì¤„ ê±°ì˜ˆìš” ğŸ¥¬ğŸ’š",
        "ì •ì„±ìŠ¤ëŸ½ê²Œ ë‹´ê·¼ í•œ ì…ì´ ë§ˆìŒê¹Œì§€ ì •í™”ì‹œì¼œì¤„ ê±°ì˜ˆìš” ğŸ§˜â€â™€ï¸",
        "ì˜¤ëŠ˜ì€ ìì‹ ì—ê²Œ íŠ¹ë³„í•œ ì„ ë¬¼ì„ í•´ì£¼ì„¸ìš” ğŸ",
        "ê¹”ë”í•˜ê³  ë‹´ë°±í•œ ë§›ì´ ë‹¹ì‹ ì˜ í’ˆê²©ì„ ë†’ì—¬ì¤„ ê±°ì˜ˆìš” âœ¨ğŸ‘‘"
      ]
    },
    { 
      name: 'í•œì‹', 
      emoji: 'ğŸš', 
      color: 'bg-green-500',
      messages: [
        "ì •ê°ˆí•œ í•œìƒì°¨ë¦¼ì´ ë‹¹ì‹ ì˜ ë§ˆìŒì„ í¸ì•ˆí•˜ê²Œ í•´ì¤„ ê±°ì˜ˆìš” ğŸ•Šï¸",
        "ì–´ë¨¸ë‹ˆì˜ ì†ë§›ì´ ê·¸ë¦¬ìš´ ì˜¤ëŠ˜, í•œì‹ì´ ë”±ì´ì—ìš” ğŸ‘©â€ğŸ³ğŸ’•",
        "ê±´ê°•í•œ ë°¥ìƒì´ ë‹¹ì‹ ì˜ ëª¸ê³¼ ë§ˆìŒì„ ì±™ê²¨ì¤„ ê±°ì˜ˆìš” ğŸŒ¿",
        "ì „í†µì˜ ë§›ì´ ë‹¹ì‹ ì˜ ë¿Œë¦¬ë¥¼ ìƒê°ë‚˜ê²Œ í•´ì¤„ ê±°ì˜ˆìš” ğŸ "
      ]
    },
    { 
      name: 'ì¤‘ì‹', 
      emoji: 'ğŸ¥¢', 
      color: 'bg-red-400',
      messages: [
        "ê¸°ë¦„ì§„ ë§›ì´ ë‹¹ì‹ ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë‹¬ë˜ì¤„ ê±°ì˜ˆìš” ğŸ˜Š",
        "ì˜¤ëŠ˜ì€ ì¡°ê¸ˆ íŠ¹ë³„í•œ ë§›ì„ ì›í•˜ì‹œëŠ”êµ°ìš”! ğŸ­",
        "ë³¶ìŒë°¥ í•œ ì ‘ì‹œë©´ ëª¨ë“  ê³ ë¯¼ì´ í•´ê²°ë  ê±°ì˜ˆìš” ğŸ›âœ¨",
        "ì¤‘êµ­ì§‘ íŠ¹ìœ ì˜ ê·¸ ë§›ì´ í–¥ìˆ˜ë¥¼ ë¶ˆëŸ¬ì¼ìœ¼í‚¬ ê±°ì˜ˆìš” ğŸ®"
      ]
    },
    { 
      name: 'ì¼ì‹', 
      emoji: 'ğŸ£', 
      color: 'bg-yellow-400',
      messages: [
        "ì‹ ì„ í•˜ê³  ê¹”ë”í•œ ë§›ì´ ë‹¹ì‹ ì˜ ê°ê°ì„ ê¹¨ì›Œì¤„ ê±°ì˜ˆìš” ğŸŒ¸",
        "ì •ì„±ìŠ¤ëŸ½ê²Œ ë§Œë“  í•œ ì  í•œ ì ì´ ì˜ˆìˆ ì´ì—ìš” ğŸ¨",
        "ì˜¤ëŠ˜ì€ ìì‹ ì„ ìœ„í•œ íŠ¹ë³„í•œ ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš” â›©ï¸",
        "ì„¬ì„¸í•œ ë§›ì´ ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ìš°ì•„í•˜ê²Œ ë§Œë“¤ì–´ì¤„ ê±°ì˜ˆìš” ğŸ‹"
      ]
    },
    { 
      name: 'ì–‘ì‹', 
      emoji: 'ğŸ', 
      color: 'bg-blue-400',
      messages: [
        "ì´êµ­ì ì¸ ë§›ì´ ë‹¹ì‹ ì˜ ì¼ìƒì— ë³€í™”ë¥¼ ì¤„ ê±°ì˜ˆìš” ğŸŒ",
        "ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸° ì†ì—ì„œ ì¦ê¸°ëŠ” í•œ ë¼! ğŸ•¯ï¸ğŸ’•",
        "ì˜¤ëŠ˜ì€ ì¡°ê¸ˆ ë” ì„¸ë ¨ëœ ë§›ì„ ì›í•˜ì‹œëŠ”êµ°ìš” ğŸ¥‚",
        "ì„œì–‘ì˜ í’ë¯¸ê°€ ë‹¹ì‹ ì˜ ë§ˆìŒì„ ì„¤ë ˆê²Œ í•´ì¤„ ê±°ì˜ˆìš” ğŸ’ƒ"
      ]
    },
    { 
      name: 'ê¸°íƒ€', 
      emoji: 'ğŸ•', 
      color: 'bg-teal-400',
      messages: [
        "ìƒˆë¡œìš´ ë„ì „ì´ ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ íŠ¹ë³„í•˜ê²Œ ë§Œë“¤ì–´ì¤„ ê±°ì˜ˆìš” ğŸš€",
        "ì˜ˆìƒì¹˜ ëª»í•œ ë§›ì˜ ë°œê²¬ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”! ğŸ”âœ¨",
        "ì˜¤ëŠ˜ì€ í‰ì†Œì™€ ë‹¤ë¥¸ ì„ íƒì„ í•´ë³´ëŠ” ê²Œ ì–´ë–¨ê¹Œìš”? ğŸ²",
        "ëª¨í—˜ì‹¬ì´ ê°€ë“í•œ ë‹¹ì‹ ì—ê²Œ ë”± ë§ëŠ” ì„ íƒì´ì—ìš”! ğŸ—ºï¸ğŸ’«"
      ]
    }
  ];

  const easeOutExpo = (t) => t === 1 ? 1 : 1 - Math.pow(2, -10 * t);
  const easeOutQuart = (t) => 1 - Math.pow(1 - t, 4);
  const easeInOutCubic = (t) => t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;

  const createSparkles = () => {
    const container = document.querySelector('.sparkle-container');
    if (!container) return;
    
    for (let i = 0; i < 30; i++) {
      const sparkle = document.createElement('div');
      sparkle.className = 'absolute w-3 h-3 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full animate-ping pointer-events-none';
      sparkle.style.left = Math.random() * 100 + '%';
      sparkle.style.top = Math.random() * 100 + '%';
      sparkle.style.animationDelay = Math.random() * 1 + 's';
      sparkle.style.animationDuration = Math.random() * 1 + 1 + 's';
      container.appendChild(sparkle);
      
      setTimeout(() => sparkle.remove(), 4000);
    }
  };

  const animateWheel = useCallback((startRotation, endRotation, duration, easingFunc = easeOutQuart) => {
    return new Promise((resolve) => {
      const startTime = Date.now();
      
      const animate = () => {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        const easedProgress = easingFunc(progress);
        const currentRotation = startRotation + (endRotation - startRotation) * easedProgress;
        setRotation(currentRotation);
        
        if (progress < 1) {
          animationRef.current = requestAnimationFrame(animate);
        } else {
          resolve();
        }
      };
      
      animationRef.current = requestAnimationFrame(animate);
    });
  }, []);

  const spinWheel = async () => {
    if (isSpinning) return;
    
    setIsSpinning(true);
    setShowResult(false);
    setResult(null);

    if (navigator.vibrate) {
      navigator.vibrate([50, 100, 50]);
    }

    const currentRotation = rotation % 360;
    const minSpins = 8;
    const maxSpins = 12;
    const spins = minSpins + Math.random() * (maxSpins - minSpins);
    const finalAngle = Math.random() * 360;
    const totalRotation = rotation + (spins * 360) + finalAngle;
    
    try {
      await animateWheel(rotation, rotation + 360, 800, easeInOutCubic);
      await animateWheel(rotation + 360, rotation + (spins - 2) * 360, 1200, (t) => t);
      await animateWheel(rotation + (spins - 2) * 360, totalRotation, 3000, easeOutExpo);
      
      const finalRotation = totalRotation % 360;
      const adjustedRotation = (360 - finalRotation) % 360;
      const selectedIndex = Math.floor(adjustedRotation / 36);
      const selectedMenu = menus[selectedIndex];
      
      const randomMessage = selectedMenu.messages[Math.floor(Math.random() * selectedMenu.messages.length)];

      setTimeout(() => {
        setResult({ name: selectedMenu.name, message: randomMessage });
        setShowResult(true);
        createSparkles();
        
        if (navigator.vibrate) {
          navigator.vibrate([100, 50, 100, 50, 200]);
        }
        
        setIsSpinning(false);
      }, 500);
      
    } catch (error) {
      setIsSpinning(false);
    }
  };

  const resetWheel = () => {
    if (animationRef.current) {
      cancelAnimationFrame(animationRef.current);
    }
    setRotation(0);
    setResult(null);
    setShowResult(false);
    setIsSpinning(false);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-500 p-4 flex items-center justify-center">
      <div className="sparkle-container absolute inset-0 pointer-events-none"></div>
      
      <Card className="w-full max-w-2xl bg-white/95 backdrop-blur-sm shadow-2xl border-0">
        <CardHeader className="text-center space-y-4 pb-6">
          <div className="flex items-center justify-center gap-2">
            <Utensils className="h-8 w-8 text-purple-600" />
            <CardTitle className="text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
              ì ì‹¬ë©”ë‰´ ë£°ë ›
            </CardTitle>
            <Utensils className="h-8 w-8 text-purple-600" />
          </div>
          <CardDescription className="text-lg text-gray-600">
            ì˜¤ëŠ˜ ì ì‹¬ì€ ë¬´ì—‡ì„ ë¨¹ì„ê¹Œìš”? ë£°ë ›ì„ ëŒë ¤ë³´ì„¸ìš”! ğŸ¯
          </CardDescription>
        </CardHeader>

        <CardContent className="space-y-12">
          <div className="relative flex justify-center">
            <div className="relative w-96 h-96">
              <div className="absolute top-2 left-1/2 transform -translate-x-1/2 z-20">
                <div className="relative">
                  <div className="w-4 h-12 bg-gradient-to-b from-yellow-300 to-yellow-600 shadow-lg relative"
                       style={{
                         borderRadius: '50% 50% 50% 50% / 30% 30% 70% 70%',
                       }}>
                    <div className="absolute top-1.5 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-green-400 rounded-full opacity-90"></div>
                  </div>
                </div>
              </div>

              <div className="relative w-full h-full">
                <div className="absolute inset-0 bg-gradient-to-br from-blue-800 to-blue-900 rounded-full p-4 shadow-2xl">
                  {Array.from({ length: 12 }, (_, i) => (
                    <div
                      key={i}
                      className="absolute w-2 h-2 bg-yellow-400 rounded-full"
                      style={{
                        top: '10px',
                        left: '50%',
                        transform: `translateX(-50%) rotate(${i * 30}deg) translateY(140px) rotate(-${i * 30}deg)`
                      }}
                    />
                  ))}

                  <div 
                    ref={wheelRef}
                    className="w-full h-full rounded-full overflow-hidden relative"
                    style={{ transform: `rotate(${rotation}deg)` }}
                  >
                    <svg width="100%" height="100%" viewBox="0 0 400 400" className="w-full h-full">
                      <g transform="translate(200,200)">
                        {menus.map((menu, index) => {
                          const angle = index * 36;
                          const radian = (angle * Math.PI) / 180;
                          const nextRadian = ((angle + 36) * Math.PI) / 180;
                          const radius = 180;
                          
                          const x1 = Math.sin(radian) * radius;
                          const y1 = -Math.cos(radian) * radius;
                          const x2 = Math.sin(nextRadian) * radius;
                          const y2 = -Math.cos(nextRadian) * radius;

                          const colors = [
                            '#ef4444', '#06b6d4', '#3b82f6', '#f97316', '#a855f7',
                            '#22c55e', '#ef4444', '#eab308', '#3b82f6', '#14b8a6'
                          ];

                          const textAngle = angle + 18;
                          const textRadian = (textAngle * Math.PI) / 180;
                          const textRadius = 120;
                          const textX = Math.sin(textRadian) * textRadius;
                          const textY = -Math.cos(textRadian) * textRadius;

                          return (
                            <g key={index}>
                              <path
                                d={`M 0,0 L ${x1},${y1} A ${radius},${radius} 0 0,1 ${x2},${y2} Z`}
                                fill={colors[index]}
                                stroke="#000"
                                strokeWidth="2"
                              />
                              <g transform={`translate(${textX}, ${textY})`}>
                                <text
                                  x="0"
                                  y="-8"
                                  textAnchor="middle"
                                  dominantBaseline="middle"
                                  className="fill-white font-bold text-lg drop-shadow-lg"
                                  transform={`rotate(${-rotation - textAngle})`}
                                >
                                  {menu.emoji}
                                </text>
                                <text
                                  x="0"
                                  y="12"
                                  textAnchor="middle"
                                  dominantBaseline="middle"
                                  className={`font-bold text-xs drop-shadow-lg ${
                                    colors[index] === '#eab308' ? 'fill-gray-800' : 'fill-white'
                                  }`}
                                  transform={`rotate(${-rotation - textAngle})`}
                                >
                                  {menu.name}
                                </text>
                              </g>
                            </g>
                          );
                        })}
                      </g>
                    </svg>
                  </div>

                  <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-blue-800 rounded-full flex items-center justify-center shadow-lg z-10">
                    <Sparkles className="h-8 w-8 text-yellow-400" />
                  </div>
                </div>
              </div>

              <div className="absolute -bottom-16 left-1/2 transform -translate-x-1/2">
                <div className="w-48 h-8 bg-gradient-to-r from-blue-800 to-blue-900 rounded-full shadow-lg"></div>
                <div className="absolute -top-8 left-1/2 transform -translate-x-1/2 w-4 h-12 bg-gradient-to-b from-blue-100 to-blue-800 rounded-t-full"></div>
              </div>
            </div>
          </div>

          <div className="flex justify-center gap-4 pt-8">
            <Button
              onClick={spinWheel}
              disabled={isSpinning}
              size="lg"
              className="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:scale-100"
            >
              {isSpinning ? (
                <>
                  <RotateCcw className="mr-2 h-5 w-5 animate-spin" />
                  ëŒë¦¬ëŠ” ì¤‘...
                </>
              ) : (
                <>
                  <Sparkles className="mr-2 h-5 w-5" />
                  ë£°ë › ëŒë¦¬ê¸°!
                </>
              )}
            </Button>

            <Button
              onClick={resetWheel}
              variant="outline"
              size="lg"
              className="border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-bold py-3 px-6 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105"
            >
              <RotateCcw className="mr-2 h-5 w-5" />
              ë¦¬ì…‹
            </Button>
          </div>

          {!showResult && (
            <div className="text-center bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 shadow-lg border border-green-100 max-w-lg mx-auto">
              <div className="flex items-center justify-center mb-4">
                <span className="text-2xl mr-2">ğŸŒ¿</span>
                <h3 className="text-lg font-bold text-green-700">ì˜¤ëŠ˜ì˜ ê±´ê°• íŒ</h3>
                <span className="text-2xl ml-2">ğŸ’š</span>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {healthTips.map((tip, index) => (
                  <div key={index} className="bg-white/80 rounded-xl p-3 border border-green-100">
                    <div className="flex items-center mb-2">
                      <span className="text-lg mr-2">{tip.icon}</span>
                      <span className="font-semibold text-sm text-green-600">{tip.category}</span>
                    </div>
                    <p className="text-xs text-gray-700 leading-relaxed">{tip.tip}</p>
                  </div>
                ))}
              </div>
              
              <div className="flex items-center justify-center pt-3 space-x-2">
                <div className="w-2 h-2 bg-green-400 rounded-full"></div>
                <span className="text-xs text-gray-600 font-medium">
                  ê±´ê°•í•œ ì„ íƒì´ í–‰ë³µí•œ í•˜ë£¨ë¥¼ ë§Œë“¤ì–´ìš”
                </span>
                <div className="w-2 h-2 bg-blue-400 rounded-full"></div>
              </div>
            </div>
          )}

          {showResult && (
            <div className={`text-center transform transition-all duration-700 ${showResult ? 'scale-105 opacity-100' : 'scale-95 opacity-0'} pt-6`}>
              <div className="bg-gradient-to-br from-pink-200 via-purple-200 to-indigo-200 rounded-3xl p-6 shadow-2xl max-w-md mx-auto border border-white/60 backdrop-blur-sm">
                
                <div className="mb-5">
                  <h3 className="text-2xl font-bold text-purple-800 mb-2 tracking-wide drop-shadow-sm">
                    âœ¨ ì˜¤ëŠ˜ì˜ ì„ íƒ âœ¨
                  </h3>
                  <p className="text-sm font-medium text-purple-600 opacity-80">
                    ë§›ìˆëŠ” ì‹ì‚¬ ì‹œê°„ì´ì—ìš”
                  </p>
                </div>

                <div className="bg-white/90 backdrop-blur-sm rounded-2xl p-5 shadow-lg border border-purple-100">
                  <div className="flex items-center justify-center mb-4">
                    <span className="text-4xl mr-4 drop-shadow-lg">
                      {menus.find(menu => menu.name === result?.name)?.emoji || 'ğŸ½ï¸'}
                    </span>
                    <div className="text-center">
                      <p className="text-2xl font-bold text-purple-800 mb-1">
                        {result?.name}
                      </p>
                      <div className="w-16 h-1 bg-gradient-to-r from-pink-300 to-purple-300 rounded-full mx-auto"></div>
                    </div>
                  </div>
                  
                  <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100">
                    <p className="text-sm text-gray-700 leading-relaxed font-medium text-center">
                      {result?.message}
                    </p>
                  </div>
                </div>

                <div className="mt-5 flex justify-center items-center space-x-3">
                  <div className="flex space-x-1">
                    <div className="w-2 h-2 bg-pink-400 rounded-full animate-pulse"></div>
                    <div className="w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-75"></div>
                    <div className="w-2 h-2 bg-indigo-400 rounded-full animate-pulse delay-150"></div>
                  </div>
                  <div className="text-purple-600 text-sm font-medium">ğŸ’œ</div>
                  <div className="flex space-x-1">
                    <div className="w-2 h-2 bg-indigo-400 rounded-full animate-pulse delay-150"></div>
                    <div className="w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-75"></div>
                    <div className="w-2 h-2 bg-pink-400 rounded-full animate-pulse"></div>
                  </div>
                </div>
              </div>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
};

export default LunchRoulette;
