import React, { useState, useRef, useCallback } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Sparkles, RotateCcw, Trophy, Utensils } from 'lucide-react';

const LunchRoulette = () => {
  const [isSpinning, setIsSpinning] = useState(false);
  const [result, setResult] = useState(null);
  const [showResult, setShowResult] = useState(false);
  const [rotation, setRotation] = useState(0);
  const wheelRef = useRef(null);
  const animationRef = useRef(null);

  const healthTips = [
    {
      icon: "ü•ó",
      category: "Í∑†Ìòï ÏãùÏÇ¨",
      tip: "ÌÉÑÏàòÌôîÎ¨º, Îã®Î∞±Ïßà, Ï±ÑÏÜåÎ•º Í≥®Í≥†Î£® ÏÑ≠Ï∑®ÌïòÎ©¥ ÌïòÎ£® Ï¢ÖÏùº ÏóêÎÑàÏßÄÍ∞Ä ÎÑòÏ≥êÏöî!"
    },
    {
      icon: "üíß",
      category: "ÏàòÎ∂Ñ ÏÑ≠Ï∑®", 
      tip: "ÌïòÎ£® 8ÏûîÏùò Î¨ºÎ°ú Î™∏ÏÜç ÎèÖÏÜåÎ•º ÍπîÎÅîÌïòÍ≤å Î∞∞Ï∂úÌïòÏÑ∏Ïöî!"
    },
    {
      icon: "üö∂‚Äç‚ôÇÔ∏è",
      category: "Íæ∏Ï§ÄÌïú Ïö¥Îèô",
      tip: "ÌïòÎ£® 30Î∂Ñ Í±∑Í∏∞Îßå Ìï¥ÎèÑ Ïã¨Ïû•Î≥ë, ÎãπÎá® ÏòàÎ∞©Ïóê ÌÅ∞ ÎèÑÏõÄÏù¥ Îê©ÎãàÎã§!"
    },
    {
      icon: "üò¥", 
      category: "Ï∂©Î∂ÑÌïú ÏàòÎ©¥",
      tip: "ÌïòÎ£® 7~8ÏãúÍ∞Ñ ÏàôÎ©¥ÏúºÎ°ú Î©¥Ïó≠Î†•ÏùÑ ÎÜíÏù¥Í≥† Ïä§Ìä∏Î†àÏä§Î•º Ìï¥ÏÜåÌïòÏÑ∏Ïöî!"
    }
  ];

  const menus = [
    { 
      name: 'ÍπÄÏπòÏ∞åÍ∞ú', 
      emoji: 'üå∂Ô∏è', 
      color: 'bg-red-500',
      messages: [
        "Îú®ÎÅàÌïú Íµ≠Î¨ºÏù¥ Î™∏Í≥º ÎßàÏùåÏùÑ Îî∞ÎúªÌïòÍ≤å Ìï¥Ï§Ñ Í±∞ÏòàÏöî üíï",
        "Ïò§Îäò Í∞ôÏùÄ ÎÇ†Ïóî Îß§ÏΩ§Ìïú ÍπÄÏπòÏ∞åÍ∞úÍ∞Ä Îî±Ïù¥Ï£†! üî•",
        "Ìï†Î®∏ÎãàÍ∞Ä ÎÅìÏó¨Ï£ºÎçò Í∑∏ ÎßõÏù¥ Í∑∏Î¶¨ÏõåÏßÄÎäî ÎÇ†Ïù¥ÎÑ§Ïöî üëµüíù",
        "ÍπÄÏπòÏùò ÍπäÏùÄ ÎßõÏù¥ ÎãπÏã†Ïùò ÌïòÎ£®Î•º ÏôÑÏÑ±ÏãúÏºúÏ§Ñ Í±∞ÏòàÏöî ‚ú®"
      ]
    },
    { 
      name: 'ÏàúÎåÄÍµ≠', 
      emoji: 'üç≤', 
      color: 'bg-cyan-500',
      messages: [
        "ÏßÑÌïú Íµ≠Î¨ºÏù¥ ÏßÄÏπú ÎãπÏã†ÏùÑ ÏúÑÎ°úÌï¥Ï§Ñ Í±∞ÏòàÏöî ü§ó",
        "Îî∞ÎúªÌïú ÏàúÎåÄÍµ≠ Ìïú Í∑∏Î¶áÏù¥Î©¥ Î™®Îì† ÌîºÎ°úÍ∞Ä ÏÇ¨ÎùºÏ†∏Ïöî üòå",
        "Ïò§ÎäòÏùÄ Îì†Îì†Ìïú Ìïú ÎÅºÍ∞Ä ÌïÑÏöîÌïú ÎÇ†Ïù¥ÏóêÏöî! üí™",
        "ÍπäÍ≥† ÏßÑÌïú ÎßõÏù¥ ÎãπÏã†Ïùò ÎßàÏùåÍπåÏßÄ Ï±ÑÏõåÏ§Ñ Í±∞ÏòàÏöî ‚ù§Ô∏è"
      ]
    },
    { 
      name: 'Î∂ÄÎåÄÏ∞åÍ∞ú', 
      emoji: 'üçú', 
      color: 'bg-blue-500',
      messages: [
        "ÏïåÎ°ùÎã¨Î°ùÌïú Ïû¨Î£åÎì§Ïù¥ ÎãπÏã†Ïùò Í∏∞Î∂ÑÏùÑ Î∞ùÍ≤å ÎßåÎì§Ïñ¥Ï§Ñ Í±∞ÏòàÏöî üåà",
        "ÏπúÍµ¨Îì§Í≥º ÎÇòÎà†Î®πÍ≥† Ïã∂ÏùÄ Í∑∏Îü∞ ÎßõÏù¥Ï£†! üë´",
        "Ìïú ÏàüÍ∞ÄÎùΩÏóê Îã¥Í∏¥ Ï∂îÏñµÏùò ÎßõÏùÑ ÎäêÍª¥Î≥¥ÏÑ∏Ïöî ü•Ñüí≠",
        "Ìë∏ÏßêÌïú Î∂ÄÎåÄÏ∞åÍ∞úÎ°ú Ïò§Îäò ÌïòÎ£®Î•º Îì†Îì†ÌïòÍ≤å! üéâ"
      ]
    },
    { 
      name: 'Îñ°Î≥∂Ïù¥', 
      emoji: 'üçò', 
      color: 'bg-orange-500',
      messages: [
        "Ï´ÑÍπÉÌïú Îñ°Ïù¥ ÎãπÏã†Ïùò Ïä§Ìä∏Î†àÏä§Î•º Î™®Îëê ÎÇ†Î†§Î≤ÑÎ¶¥ Í±∞ÏòàÏöî üí®",
        "Îã¨ÏΩ§Îß§ÏΩ§Ìïú ÎßõÏù¥ Ïñ¥Î¶∞ ÏãúÏ†àÎ°ú Îç∞Î†§Í∞ÄÏ§Ñ Í±∞ÏòàÏöî üéà",
        "Ïò§ÎäòÏùÄ Í∞ÑÏãùÏù¥ ÏïÑÎãå ÎãπÎãπÌïú Ìïú ÎÅº! üòã",
        "Îπ®Í∞Ñ ÏÜåÏä§Í∞Ä ÎãπÏã†Ïùò ÌïòÎ£®Ïóê ÌôúÎ†•ÏùÑ Î∂àÏñ¥ÎÑ£Ïñ¥Ï§Ñ Í±∞ÏòàÏöî üî¥‚ú®"
      ]
    },
    { 
      name: 'ÏÉ§Î∏åÏÉ§Î∏å', 
      emoji: 'ü•©', 
      color: 'bg-purple-500',
      messages: [
        "Ïã†ÏÑ†Ìïú Ï±ÑÏÜåÏôÄ Í≥†Í∏∞Í∞Ä ÎãπÏã†ÏùÑ Í±¥Í∞ïÌïòÍ≤å ÎßåÎì§Ïñ¥Ï§Ñ Í±∞ÏòàÏöî ü•¨üíö",
        "Ï†ïÏÑ±Ïä§ÎüΩÍ≤å Îã¥Í∑º Ìïú ÏûÖÏù¥ ÎßàÏùåÍπåÏßÄ Ï†ïÌôîÏãúÏºúÏ§Ñ Í±∞ÏòàÏöî üßò‚Äç‚ôÄÔ∏è",
        "Ïò§ÎäòÏùÄ ÏûêÏã†ÏóêÍ≤å ÌäπÎ≥ÑÌïú ÏÑ†Î¨ºÏùÑ Ìï¥Ï£ºÏÑ∏Ïöî üéÅ",
        "ÍπîÎÅîÌïòÍ≥† Îã¥Î∞±Ìïú ÎßõÏù¥ ÎãπÏã†Ïùò ÌíàÍ≤©ÏùÑ ÎÜíÏó¨Ï§Ñ Í±∞ÏòàÏöî ‚ú®üëë"
      ]
    },
    { 
      name: 'ÌïúÏãù', 
      emoji: 'üçö', 
      color: 'bg-green-500',
      messages: [
        "Ï†ïÍ∞àÌïú ÌïúÏÉÅÏ∞®Î¶ºÏù¥ ÎãπÏã†Ïùò ÎßàÏùåÏùÑ Ìé∏ÏïàÌïòÍ≤å Ìï¥Ï§Ñ Í±∞ÏòàÏöî üïäÔ∏è",
        "Ïñ¥Î®∏ÎãàÏùò ÏÜêÎßõÏù¥ Í∑∏Î¶¨Ïö¥ Ïò§Îäò, ÌïúÏãùÏù¥ Îî±Ïù¥ÏóêÏöî üë©‚Äçüç≥üíï",
        "Í±¥Í∞ïÌïú Î∞•ÏÉÅÏù¥ ÎãπÏã†Ïùò Î™∏Í≥º ÎßàÏùåÏùÑ Ï±ôÍ≤®Ï§Ñ Í±∞ÏòàÏöî üåø",
        "Ï†ÑÌÜµÏùò ÎßõÏù¥ ÎãπÏã†Ïùò ÎøåÎ¶¨Î•º ÏÉùÍ∞ÅÎÇòÍ≤å Ìï¥Ï§Ñ Í±∞ÏòàÏöî üè†"
      ]
    },
    { 
      name: 'Ï§ëÏãù', 
      emoji: 'ü•¢', 
      color: 'bg-red-400',
      messages: [
        "Í∏∞Î¶ÑÏßÑ ÎßõÏù¥ ÎãπÏã†Ïùò Ïä§Ìä∏Î†àÏä§Î•º Îã¨ÎûòÏ§Ñ Í±∞ÏòàÏöî üòä",
        "Ïò§ÎäòÏùÄ Ï°∞Í∏à ÌäπÎ≥ÑÌïú ÎßõÏùÑ ÏõêÌïòÏãúÎäîÍµ∞Ïöî! üé≠",
        "Î≥∂ÏùåÎ∞• Ìïú Ï†ëÏãúÎ©¥ Î™®Îì† Í≥†ÎØºÏù¥ Ìï¥Í≤∞Îê† Í±∞ÏòàÏöî üçõ‚ú®",
        "Ï§ëÍµ≠Ïßë ÌäπÏú†Ïùò Í∑∏ ÎßõÏù¥ Ìñ•ÏàòÎ•º Î∂àÎü¨ÏùºÏúºÌÇ¨ Í±∞ÏòàÏöî üèÆ"
      ]
    },
    { 
      name: 'ÏùºÏãù', 
      emoji: 'üç£', 
      color: 'bg-yellow-400',
      messages: [
        "Ïã†ÏÑ†ÌïòÍ≥† ÍπîÎÅîÌïú ÎßõÏù¥ ÎãπÏã†Ïùò Í∞êÍ∞ÅÏùÑ Íπ®ÏõåÏ§Ñ Í±∞ÏòàÏöî üå∏",
        "Ï†ïÏÑ±Ïä§ÎüΩÍ≤å ÎßåÎì† Ìïú Ï†ê Ìïú Ï†êÏù¥ ÏòàÏà†Ïù¥ÏóêÏöî üé®",
        "Ïò§ÎäòÏùÄ ÏûêÏã†ÏùÑ ÏúÑÌïú ÌäπÎ≥ÑÌïú ÏãúÍ∞ÑÏùÑ Í∞ÄÏ†∏Î≥¥ÏÑ∏Ïöî ‚õ©Ô∏è",
        "ÏÑ¨ÏÑ∏Ìïú ÎßõÏù¥ ÎãπÏã†Ïùò ÌïòÎ£®Î•º Ïö∞ÏïÑÌïòÍ≤å ÎßåÎì§Ïñ¥Ï§Ñ Í±∞ÏòàÏöî üéã"
      ]
    },
    { 
      name: 'ÏñëÏãù', 
      emoji: 'üçù', 
      color: 'bg-blue-400',
      messages: [
        "Ïù¥Íµ≠Ï†ÅÏù∏ ÎßõÏù¥ ÎãπÏã†Ïùò ÏùºÏÉÅÏóê Î≥ÄÌôîÎ•º Ï§Ñ Í±∞ÏòàÏöî üåç",
        "Î°úÎß®Ìã±Ìïú Î∂ÑÏúÑÍ∏∞ ÏÜçÏóêÏÑú Ï¶êÍ∏∞Îäî Ìïú ÎÅº! üïØÔ∏èüíï",
        "Ïò§ÎäòÏùÄ Ï°∞Í∏à Îçî ÏÑ∏Î†®Îêú ÎßõÏùÑ ÏõêÌïòÏãúÎäîÍµ∞Ïöî ü•Ç",
        "ÏÑúÏñëÏùò ÌíçÎØ∏Í∞Ä ÎãπÏã†Ïùò ÎßàÏùåÏùÑ ÏÑ§Î†àÍ≤å Ìï¥Ï§Ñ Í±∞ÏòàÏöî üíÉ"
      ]
    },
    { 
      name: 'Í∏∞ÌÉÄ', 
      emoji: 'üçï', 
      color: 'bg-teal-400',
      messages: [
        "ÏÉàÎ°úÏö¥ ÎèÑÏ†ÑÏù¥ ÎãπÏã†Ïùò ÌïòÎ£®Î•º ÌäπÎ≥ÑÌïòÍ≤å ÎßåÎì§Ïñ¥Ï§Ñ Í±∞ÏòàÏöî üöÄ",
        "ÏòàÏÉÅÏπò Î™ªÌïú ÎßõÏùò Î∞úÍ≤¨Ïù¥ Í∏∞Îã§Î¶¨Í≥† ÏûàÏñ¥Ïöî! üîç‚ú®",
        "Ïò§ÎäòÏùÄ ÌèâÏÜåÏôÄ Îã§Î•∏ ÏÑ†ÌÉùÏùÑ Ìï¥Î≥¥Îäî Í≤å Ïñ¥Îñ®ÍπåÏöî? üé≤",
        "Î™®ÌóòÏã¨Ïù¥ Í∞ÄÎìùÌïú ÎãπÏã†ÏóêÍ≤å Îî± ÎßûÎäî ÏÑ†ÌÉùÏù¥ÏóêÏöî! üó∫Ô∏èüí´"
      ]
    }
  ];

  const easeOutExpo = (t) => t === 1 ? 1 : 1 - Math.pow(2, -10 * t);
  const easeOutQuart = (t) => 1 - Math.pow(1 - t, 4);
  const easeInOutCubic = (t) => t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;

  const createSparkles = () => {
    const container = document.querySelector('.sparkle-container');
    if (!container) return;
    
    for (let i = 0; i < 30; i++) {
      const sparkle = document.createElement('div');
      sparkle.className = 'absolute w-3 h-3 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full animate-ping pointer-events-none';
      sparkle.style.left = Math.random() * 100 + '%';
      sparkle.style.top = Math.random() * 100 + '%';
      sparkle.style.animationDelay = Math.random() * 1 + 's';
      sparkle.style.animationDuration = Math.random() * 1 + 1 + 's';
      container.appendChild(sparkle);
      
      setTimeout(() => sparkle.remove(), 4000);
    }
  };

  const animateWheel = useCallback((startRotation, endRotation, duration, easingFunc = easeOutQuart) => {
    return new Promise((resolve) => {
      const startTime = Date.now();
      
      const animate = () => {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        const easedProgress = easingFunc(progress);
        const currentRotation = startRotation + (endRotation - startRotation) * easedProgress;
        setRotation(currentRotation);
        
        if (progress < 1) {
          animationRef.current = requestAnimationFrame(animate);
        } else {
          resolve();
        }
      };
      
      animationRef.current = requestAnimationFrame(animate);
    });
  }, []);

  const spinWheel = async () => {
    if (isSpinning) return;
    
    setIsSpinning(true);
    setShowResult(false);
    setResult(null);

    if (navigator.vibrate) {
      navigator.vibrate([50, 100, 50]);
    }

    const currentRotation = rotation % 360;
    const minSpins = 8;
    const maxSpins = 12;
    const spins = minSpins + Math.random() * (maxSpins - minSpins);
    const finalAngle = Math.random() * 360;
    const totalRotation = rotation + (spins * 360) + finalAngle;
    
    try {
      await animateWheel(rotation, rotation + 360, 800, easeInOutCubic);
      await animateWheel(rotation + 360, rotation + (spins - 2) * 360, 1200, (t) => t);
      await animateWheel(rotation + (spins - 2) * 360, totalRotation, 3000, easeOutExpo);
      
      const finalRotation = totalRotation % 360;
      const adjustedRotation = (360 - finalRotation) % 360;
      const selectedIndex = Math.floor(adjustedRotation / 36);
      const selectedMenu = menus[selectedIndex];
      
      const randomMessage = selectedMenu.messages[Math.floor(Math.random() * selectedMenu.messages.length)];

      setTimeout(() => {
        setResult({ name: selectedMenu.name, message: randomMessage });
        setShowResult(true);
        createSparkles();
        
        if (navigator.vibrate) {
          navigator.vibrate([100, 50, 100, 50, 200]);
        }
        
        setIsSpinning(false);
      }, 500);
      
    } catch (error) {
      setIsSpinning(false);
    }
  };

  const resetWheel = () => {
    if (animationRef.current) {
      cancelAnimationFrame(animationRef.current);
    }
    setRotation(0);
    setResult(null);
    setShowResult(false);
    setIsSpinning(false);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-500 p-4 flex items-center justify-center">
      <div className="sparkle-container absolute inset-0 pointer-events-none"></div>
      
      <Card className="w-full max-w-2xl bg-white/95 backdrop-blur-sm shadow-2xl border-0">
        <CardHeader className="text-center space-y-4 pb-6">
          <div className="flex items-center justify-center gap-2">
            <Utensils className="h-8 w-8 text-purple-600" />
            <CardTitle className="text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
              Ï†êÏã¨Î©îÎâ¥ Î£∞Î†õ
            </CardTitle>
            <Utensils className="h-8 w-8 text-purple-600" />
          </div>
          <CardDescription className="text-lg text-gray-600">
            Ïò§Îäò Ï†êÏã¨ÏùÄ Î¨¥ÏóáÏùÑ Î®πÏùÑÍπåÏöî? Î£∞Î†õÏùÑ ÎèåÎ†§Î≥¥ÏÑ∏Ïöî! üéØ
          </CardDescription>
        </CardHeader>

        <CardContent className="space-y-12">
          <div className="relative flex justify-center">
            <div className="relative w-96 h-96">
              <div className="absolute top-2 left-1/2 transform -translate-x-1/2 z-20">
                <div className="relative">
                  <div className="w-4 h-12 bg-gradient-to-b from-yellow-300 to-yellow-600 shadow-lg relative"
                       style={{
                         borderRadius: '50% 50% 50% 50% / 30% 30% 70% 70%',
                       }}>
                    <div className="absolute top-1.5 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-green-400 rounded-full opacity-90"></div>
                  </div>
                </div>
              </div>

              <div className="relative w-full h-full">
                <div className="absolute inset-0 bg-gradient-to-br from-blue-800 to-blue-900 rounded-full p-4 shadow-2xl">
                  {Array.from({ length: 12 }, (_, i) => (
                    <div
                      key={i}
                      className="absolute w-2 h-2 bg-yellow-400 rounded-full"
                      style={{
                        top: '10px',
                        left: '50%',
                        transform: `translateX(-50%) rotate(${i * 30}deg) translateY(140px) rotate(-${i * 30}deg)`
                      }}
                    />
                  ))}

                  <div 
                    ref={wheelRef}
                    className="w-full h-full rounded-full overflow-hidden relative"
                    style={{ transform: `rotate(${rotation}deg)` }}
                  >
                    <svg width="100%" height="100%" viewBox="0 0 400 400" className="w-full h-full">
                      <g transform="translate(200,200)">
                        {menus.map((menu, index) => {
                          const angle = index * 36;
                          const radian = (angle * Math.PI) / 180;
                          const nextRadian = ((angle + 36) * Math.PI) / 180;
                          const radius = 180;
                          
                          const x1 = Math.sin(radian) * radius;
                          const y1 = -Math.cos(radian) * radius;
                          const x2 = Math.sin(nextRadian) * radius;
                          const y2 = -Math.cos(nextRadian) * radius;

                          const colors = [
                            '#ef4444', '#06b6d4', '#3b82f6', '#f97316', '#a855f7',
                            '#22c55e', '#ef4444', '#eab308', '#3b82f6', '#14b8a6'
                          ];

                          const textAngle = angle + 18;
                          const textRadian = (textAngle * Math.PI) / 180;
                          const textRadius = 120;
                          const textX = Math.sin(textRadian) * textRadius;
                          const textY = -Math.cos(textRadian) * textRadius;

                          return (
                            <g key={index}>
                              <path
                                d={`M 0,0 L ${x1},${y1} A ${radius},${radius} 0 0,1 ${x2},${y2} Z`}
                                fill={colors[index]}
                                stroke="#000"
                                strokeWidth="2"
                              />
                              <g transform={`translate(${textX}, ${textY})`}>
                                <text
                                  x="0"
                                  y="-8"
                                  textAnchor="middle"
                                  dominantBaseline="middle"
                                  className="fill-white font-bold text-lg drop-shadow-lg"
                                  transform={`rotate(${-rotation - textAngle})`}
                                >
                                  {menu.emoji}
                                </text>
                                <text
                                  x="0"
                                  y="12"
                                  textAnchor="middle"
                                  dominantBaseline="middle"
                                  className={`font-bold text-xs drop-shadow-lg ${
                                    colors[index] === '#eab308' ? 'fill-gray-800' : 'fill-white'
                                  }`}
                                  transform={`rotate(${-rotation - textAngle})`}
                                >
                                  {menu.name}
                                </text>
                              </g>
                            </g>
                          );
                        })}
                      </g>
                    </svg>
                  </div>

                  <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-blue-800 rounded-full flex items-center justify-center shadow-lg z-10">
                    <Sparkles className="h-8 w-8 text-yellow-400" />
                  </div>
                </div>
              </div>

              <div className="absolute -bottom-16 left-1/2 transform -translate-x-1/2">
                <div className="w-48 h-8 bg-gradient-to-r from-blue-800 to-blue-900 rounded-full shadow-lg"></div>
                <div className="absolute -top-8 left-1/2 transform -translate-x-1/2 w-4 h-12 bg-gradient-to-b from-blue-100 to-blue-800 rounded-t-full"></div>
              </div>
            </div>
          </div>

          <div className="flex justify-center gap-4 pt-8">
            <Button
              onClick={spinWheel}
              disabled={isSpinning}
              size="lg"
              className="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:scale-100"
            >
              {isSpinning ? (
                <>
                  <RotateCcw className="mr-2 h-5 w-5 animate-spin" />
                  ÎèåÎ¶¨Îäî Ï§ë...
                </>
              ) : (
                <>
                  <Sparkles className="mr-2 h-5 w-5" />
                  Î£∞Î†õ ÎèåÎ¶¨Í∏∞!
                </>
              )}
            </Button>

            <Button
              onClick={resetWheel}
              variant="outline"
              size="lg"
              className="border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-bold py-3 px-6 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105"
            >
              <RotateCcw className="mr-2 h-5 w-5" />
              Î¶¨ÏÖã
            </Button>
          </div>

          {!showResult && (
            <div className="text-center bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 shadow-lg border border-green-100 max-w-lg mx-auto">
              <div className="flex items-center justify-center mb-4">
                <span className="text-2xl mr-2">üåø</span>
                <h3 className="text-lg font-bold text-green-700">Ïò§ÎäòÏùò Í±¥Í∞ï ÌåÅ</h3>
                <span className="text-2xl ml-2">üíö</span>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {healthTips.map((tip, index) => (
                  <div key={index} className="bg-white/80 rounded-xl p-3 border border-green-100">
                    <div className="flex items-center mb-2">
                      <span className="text-lg mr-2">{tip.icon}</span>
                      <span className="font-semibold text-sm text-green-600">{tip.category}</span>
                    </div>
                    <p className="text-xs text-gray-700 leading-relaxed">{tip.tip}</p>
                  </div>
                ))}
              </div>
              
              <div className="flex items-center justify-center pt-3 space-x-2">
                <div className="w-2 h-2 bg-green-400 rounded-full"></div>
                <span className="text-xs text-gray-600 font-medium">
                  Í±¥Í∞ïÌïú ÏÑ†ÌÉùÏù¥ ÌñâÎ≥µÌïú ÌïòÎ£®Î•º ÎßåÎì§Ïñ¥Ïöî
                </span>
                <div className="w-2 h-2 bg-blue-400 rounded-full"></div>
              </div>
            </div>
          )}

          {showResult && (
            <div className={`text-center transform transition-all duration-700 ${showResult ? 'scale-105 opacity-100' : 'scale-95 opacity-0'} pt-6`}>
              <div className="bg-gradient-to-br from-pink-200 via-purple-200 to-indigo-200 rounded-3xl p-6 shadow-2xl max-w-md mx-auto border border-white/60 backdrop-blur-sm">
                
                <div className="mb-5">
                  <h3 className="text-2xl font-bold text-purple-800 mb-2 tracking-wide drop-shadow-sm">
                    ‚ú® Ïò§ÎäòÏùò ÏÑ†ÌÉù ‚ú®
                  </h3>
                  <p className="text-sm font-medium text-purple-600 opacity-80">
                    ÎßõÏûàÎäî ÏãùÏÇ¨ ÏãúÍ∞ÑÏù¥ÏóêÏöî
                  </p>
                </div>

                <div className="bg-white/90 backdrop-blur-sm rounded-2xl p-5 shadow-lg border border-purple-100">
                  <div className="flex items-center justify-center mb-4">
                    <span className="text-4xl mr-4 drop-shadow-lg">
                      {menus.find(menu => menu.name === result?.name)?.emoji || 'üçΩÔ∏è'}
                    </span>
                    <div className="text-center">
                      <p className="text-2xl font-bold text-purple-800 mb-1">
                        {result?.name}
                      </p>
                      <div className="w-16 h-1 bg-gradient-to-r from-pink-300 to-purple-300 rounded-full mx-auto"></div>
                    </div>
                  </div>
                  
                  <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100">
                    <p className="text-sm text-gray-700 leading-relaxed font-medium text-center">
                      {result?.message}
                    </p>
                  </div>
                </div>

                <div className="mt-5 flex justify-center items-center space-x-3">
                  <div className="flex space-x-1">
                    <div className="w-2 h-2 bg-pink-400 rounded-full animate-pulse"></div>
                    <div className="w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-75"></div>
                    <div className="w-2 h-2 bg-indigo-400 rounded-full animate-pulse delay-150"></div>
                  </div>
                  <div className="text-purple-600 text-sm font-medium">üíú</div>
                  <div className="flex space-x-1">
                    <div className="w-2 h-2 bg-indigo-400 rounded-full animate-pulse delay-150"></div>
                    <div className="w-2 h-2 bg-purple-400 rounded-full animate-pulse delay-75"></div>
                    <div className="w-2 h-2 bg-pink-400 rounded-full animate-pulse"></div>
                  </div>
                </div>
              </div>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
};

export default LunchRoulette;
